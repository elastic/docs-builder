@inherits RazorSlice<LayoutViewModel>
<aside class="sidebar hidden lg:block order-3">
	<nav id="toc-nav" class="sidebar-nav pl-4">
		<div class="pt-6 pb-20">
			@if (Model.LegacyUrl is not null)
			{
				<div class="edit-this-page">
					<a href="@Model.LegacyUrl" class="link" target="_blank">
						<svg class="link-icon"
						     xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="1 0 22 22" stroke-width="1.5" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
						</svg>
						View previous version
					</a>
				</div>
			}
			@if (Model.GithubEditUrl is not null)
			{
				<div class="edit-this-page">
					<a href="@Model.GithubEditUrl" class="link" target="_blank">
						<svg class="link-icon"
						     xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" stroke-width="1" stroke="currentColor">
							<path d="M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"/>
							<path d="M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"/>
						</svg>
						Edit this page
					</a>
				</div>
				<div class="report-an-issue">
					<a href="@Model.ReportIssueUrl" class="link" target="_blank">
						<svg class="link-icon"
						     xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" stroke="currentColor">
							<path fill-rule="evenodd" d="M1 8.74c0 .983.713 1.825 1.69 1.943.904.108 1.817.19 2.737.243.363.02.688.231.85.556l1.052 2.103a.75.75 0 0 0 1.342 0l1.052-2.103c.162-.325.487-.535.85-.556.92-.053 1.833-.134 2.738-.243.976-.118 1.689-.96 1.689-1.942V4.259c0-.982-.713-1.824-1.69-1.942a44.45 44.45 0 0 0-10.62 0C1.712 2.435 1 3.277 1 4.26v4.482Zm3-3.49a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5A.75.75 0 0 1 4 5.25ZM4.75 7a.75.75 0 0 0 0 1.5h2.5a.75.75 0 0 0 0-1.5h-2.5Z" clip-rule="evenodd"/>
						</svg>
						Report an issue
					</a>
				</div>
			}
			@if (Model.GithubEditUrl is not null || Model.LegacyUrl is not null)
			{
				<div class="mb-2"></div>
			}
			@if (Model.PageTocItems.Count > 0)
			{
				<div class="mb-4">
					<div class="font-bold mb-2">On this page</div>
					<div class="relative toc-progress-container font-body">
						<div class="toc-progress-indicator absolute top-0 h-0 left-2 w-[1px] bg-blue-elastic transition-all duration-200 ease-out "></div>
						<ul class="block w-full">
							@foreach (var item in Model.PageTocItems)
							{
								<li class="has-[:hover]:border-l-grey-80 items-center ml-2 pl-4 border-l-1 border-l-grey-20 has-[.current]:border-l-blue-elastic!">
									<a
										class="sidebar-link inline-block my-1.5 @(item.Level == 3 ? "ml-4" : string.Empty)"
										href="#@item.Slug">
										@item.Heading
									</a>
								</li>
							}
						</ul>
					</div>
				</div>
			}
		</div>

	</nav>
</aside>
