@using System.Text.Json
@using Elastic.Markdown.Page
@inherits RazorSlice<Elastic.Markdown.Myst.Components.ApplicableToViewModel>

@foreach (var item in Model.GetApplicabilityItems())
{
	<applies-to-popover
		badge-key="@item.Key"
		badge-lifecycle-text="@item.RenderData.BadgeLifecycleText"
		badge-version="@item.RenderData.Version"
		lifecycle-class="@item.RenderData.LifecycleClass"
		lifecycle-name="@item.RenderData.LifecycleName"
		show-lifecycle-name="@item.RenderData.ShowLifecycleName.ToString().ToLowerInvariant()"
		show-version="@item.RenderData.ShowVersion.ToString().ToLowerInvariant()"
		has-multiple-lifecycles="@item.RenderData.HasMultipleLifecycles.ToString().ToLowerInvariant()"
		popover-data='@(Model.ShowTooltip && item.RenderData.PopoverData is not null ? new HtmlString(JsonSerializer.Serialize(item.RenderData.PopoverData, ViewModelSerializerContext.Default.PopoverData)) : new HtmlString(""))'
		show-popover="@Model.ShowTooltip.ToString().ToLowerInvariant()"
		is-inline="@Model.Inline.ToString().ToLowerInvariant()"
	></applies-to-popover>
}
