@inherits RazorSlice<Elastic.Markdown.Myst.Directives.Diagram.DiagramViewModel>
@{
	var diagram = Model.DiagramBlock;
	if (diagram?.EncodedUrl != null)
	{
		<div class="diagram" data-diagram-type="@diagram.DiagramType">
			@if (!string.IsNullOrEmpty(diagram.LocalSvgPath))
			{
				<img src="@diagram.LocalSvgPath" 
				     alt="@diagram.DiagramType diagram" 
				     loading="lazy"
				     onerror="this.src='@diagram.EncodedUrl'" />
			}
			else
			{
				<img src="@diagram.EncodedUrl" alt="@diagram.DiagramType diagram" loading="lazy" />
			}
		</div>
	}
	else
	{
		<div class="diagram-error">
			<p>Failed to render diagram</p>
		</div>
	}
}
