@inherits RazorSliceHttpResult<Elastic.Codex.Landing.LandingViewModel>
@using System.Linq
@using Elastic.Codex.Landing
@using Elastic.Codex.Navigation
@implements IUsesLayout<Elastic.Codex._Layout, GlobalLayoutViewModel>
@functions {
	public GlobalLayoutViewModel LayoutModel => Model.CreateGlobalLayoutModel();
}
<section id="elastic-docs-v3" class="codex-landing min-h-screen bg-page">
	<div id="codex-grid" class="pt-8 max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
		@foreach (var group in Model.Groups)
		{
			@(await RenderPartialAsync(_CodexCard.Create(new CodexCardModel
			{
				Url = group.Url,
				Title = group.DisplayTitle,
				Description = group.Description,
				Icon = group.Icon,
				PageCount = group.DocumentationSetInfos.Sum(ds => ds.PageCount)
			})))
		}
		@foreach (var docSet in Model.UngroupedDocumentationSets)
		{
			@(await RenderPartialAsync(_CodexCard.Create(new CodexCardModel
			{
				Url = docSet.Url,
				Title = docSet.Title ?? docSet.Name,
				Description = docSet.Description,
				Icon = docSet.Icon,
				PageCount = docSet.PageCount
			})))
		}
	</div>

	<div id="codex-no-results" class="hidden text-text-secondary text-center py-12">
		<p>No documentation sets match your filter.</p>
	</div>
</section>
