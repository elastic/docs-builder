@inherits RazorSlice<Elastic.Documentation.Site.GlobalLayoutViewModel>
@if (Model.Features.PrimaryNavEnabled)
{
	<div id="elastic-nav-wrapper">
		<div id="elastic-nav" hx-disable="true"></div>
		@{
			var elasticNavUrl = Model.Features.StagingElasticNavEnabled 
				? "https://stag-www.elastic.co/elastic-nav.js" 
				: "https://www.elastic.co/elastic-nav.js";
		}
		<script src="@elasticNavUrl" async></script>
	</div>
 	@await RenderPartialAsync(_SecondaryNav.Create(Model))
}
else
{
	<header id="isolated-header"
	        class="sticky top-0 z-50 text-white flex items-center transition-all duration-300"
	        style="height: var(--offset-top); background: linear-gradient(135deg, #1a56a8 0%, #14407d 35%, #1a5298 65%, #0f2d5c 100%);">
		<div class="absolute inset-x-0 bottom-0 h-px" style="background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.2) 20%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.2) 80%, transparent 100%);"></div>
		<div class="max-w-(--max-layout-width) w-full mx-auto flex justify-between items-center px-4">
			<!-- Left side: hamburger + logo + title + version -->
			<div class="flex items-center gap-3">
				@* ReSharper disable once Html.IdNotResolved *@
				<label role="button" class="md:hidden cursor-pointer" for="pages-nav-hamburger">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8">
						<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"/>
					</svg>
				</label>
				<a href="@Model.Link("/")"
				   class="flex items-center gap-2.5 px-4 py-2 rounded-full transition-all duration-200 hover:scale-[1.02]"
				   style="background: rgba(255,255,255,0.08); box-shadow: 0 2px 8px rgba(0,0,0,0.25), inset 0 -8px 12px -8px rgba(255,255,255,0.15);"
				   onmouseover="this.style.background='rgba(255,255,255,0.12)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3), inset 0 -8px 12px -8px rgba(255,255,255,0.2)';"
				   onmouseout="this.style.background='rgba(255,255,255,0.08)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.25), inset 0 -8px 12px -8px rgba(255,255,255,0.15)';">
					<img src="@Model.Static("logo-elastic-glyph-color.svg")" alt="" width="28" height="28">
					<span class="text-lg font-semibold">@(Model.HeaderTitle ?? Model.DocSetName)</span>
					@if (!string.IsNullOrEmpty(Model.HeaderVersion))
					{
						<span class="bg-white/20 text-white text-xs px-2 py-0.5 rounded">v@Model.HeaderVersion</span>
					}
				</a>
			</div>

			<!-- Right side: Diagnostics + GitHub + git info -->
			<div class="hidden md:flex items-center gap-4 text-sm">
				@if (Model.Features.DiagnosticsPanelEnabled)
				{
					<diagnostics-panel></diagnostics-panel>
				}
				@if (!string.IsNullOrEmpty(Model.GitHubDocsUrl))
				{
					<a href="@Model.GitHubDocsUrl"
					   target="_blank"
					   rel="noopener"
					   class="flex items-center gap-1.5 bg-white/10 hover:bg-white/20 text-white px-3 py-1.5 rounded transition-colors">
						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
							<path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
						</svg>
						<span>elastic/@Model.GitRepository</span>
					</a>
				}
				@if (!string.IsNullOrEmpty(Model.GitBranch))
				{
					<span class="flex items-center gap-1 text-white/70">
						<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
							<path stroke-linecap="round" stroke-linejoin="round" d="M6 3v12m0 0a3 3 0 103 3V6a3 3 0 10-3-3m0 18a3 3 0 103-3M18 6a3 3 0 10-3-3v12a3 3 0 103 3"/>
						</svg>
						<span>@Model.GitBranch</span>
					</span>
				}
				@if (!string.IsNullOrEmpty(Model.GitCommitShort))
				{
					<span class="font-mono text-white/50">@Model.GitCommitShort</span>
				}
			</div>
		</div>
	</header>
}
