<!-- 
    this documentation was generated by https://github.com/reakaleek/gh-action-readme 
    with the command `VERSION=main gh action-readme update`    
-->

# <!--name-->Update Link Index<!--/name-->

[![usages](https://img.shields.io/badge/usages-white?logo=githubactions&logoColor=blue)](https://github.com/search?q=elastic%2Foblt-actions%2Fgoogle%2Fauth+%28path%3A.github%2Fworkflows+OR+path%3A**%2Faction.yml+OR+path%3A**%2Faction.yaml%29&type=code)
[![test-google-auth](https://github.com/elastic/oblt-actions/actions/workflows/test-google-auth.yml/badge.svg?branch=main)](https://github.com/elastic/oblt-actions/actions/workflows/test-google-auth.yml)

<!--description-->
This action updates the link index for the given link reference file.
<!--/description-->

## Inputs

<!--inputs-->
| Name                  | Description                                                    | Required | Default                           |
|-----------------------|----------------------------------------------------------------|----------|-----------------------------------|
| `link_reference_file` | The path to the link reference file                            | `false`  | `.artifacts/docs/html/links.json` |
| `aws_account_id`      | The AWS account ID to generate the role ARN for                | `false`  | `197730964718`                    |
| `aws_region`          | The AWS region to use                                          | `false`  | `us-east-1`                       |
| `aws_s3_bucket_name`  | The name of the S3 bucket to upload the link reference file to | `false`  | `elastic-docs-link-index`         |
<!--/inputs-->

## Outputs
<!--outputs-->
| Name | Description |
|------|-------------|
<!--/outputs-->

## Usage

<!--usage action="elastic/docs-builder/actions/update-link-index" version="env:VERSION"-->
```yaml
name: CI

on:
  push:
    branches:
      - main
    tags:
      - "*.*.*"

permissions:
  contents: read
  packages: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      pages: write
      id-token: write
    environment:
      name: github-pages
      url: ${{steps.deployment.outputs.page_url}}
    steps:
      - id: repo-basename
        run: 'echo "value=`basename ${{ github.repository }}`" >> $GITHUB_OUTPUT'
      - uses: actions/checkout@v4
      - name: Setup Pages
        id: pages
        uses: actions/configure-pages@v5.0.0
      - name: Build documentation
        uses: elastic/docs-builder@main
        with:
          prefix: '${{ steps.repo-basename.outputs.value }}'
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3.0.1
        with:
          path: .artifacts/docs/html
          
      - name: Deploy artifact
        id: deployment
        uses: actions/deploy-pages@v4.0.5 

      - name: Update Link Index
        uses: elastic/docs-builder/actions/update-link-index@main
```
<!--/usage-->
